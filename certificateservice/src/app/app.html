<div class="container mt-5 d-flex justify-content-center">
  <!-- Register Form Card -->
  <div class="card p-4 shadow-sm" style="width: 600px;">
    <h2 class="card-title text-center mb-4">Certificate Registration</h2>

    <form #registerForm="ngForm" (ngSubmit)="register(registerForm)">
      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">Certificate Name</label>
          <input type="text" name="name" class="form-control" required ngModel />
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">Type</label>
          <input type="text" name="type" class="form-control" required ngModel />
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">Issued By</label>
          <input type="text" name="issuedBy" class="form-control" required ngModel />
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">Issued To</label>
          <input type="text" name="issuedTo" class="form-control" required ngModel />
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">Issue Date</label>
          <input type="date" name="issueDate" class="form-control" required ngModel />
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">Expiry Date</label>
          <input type="date" name="expiryDate" class="form-control" required ngModel />
        </div>
      </div>

      <div class="text-center mt-3">
        <button type="submit" class="btn btn-primary btn-lg w-100" [disabled]="registerForm.invalid">
          Register
        </button>
      </div>
    </form>
  </div>
</div>

<hr class="my-5" />

<!-- Certificate List Table -->
<div class="table-responsive mt-4">
  <table class="table table-striped text-center align-middle">
    <thead class="table-light">
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Type</th>
        <th>Issued By</th>
        <th>Issued To</th>
        <th>Issue Date</th>
        <th>Expiry Date</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let certificate of certificateDetails">
        <td>{{ certificate.id }}</td>
        <td>{{ certificate.name }}</td>
        <td>{{ certificate.type }}</td>
        <td>{{ certificate.issuedBy }}</td>
        <td>{{ certificate.issuedTo }}</td>
        <td>{{ certificate.issueDate }}</td>
        <td>{{ certificate.expiryDate }}</td>
        <td>
          <button class="btn btn-warning btn-sm me-2" (click)="edit(certificate)">Edit</button>
          <button class="btn btn-danger btn-sm" (click)="deleteCertificate(certificate)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Update Certificate Form Modal -->
<div *ngIf="certificateToUpdate.id" class="update-overlay">
  <div class="update-card p-4 border border-light rounded shadow-sm">
    <h2 class="mb-4 text-center">Update Certificate</h2>

    <form #updateForm="ngForm" (ngSubmit)="updateCertificate()">
      <div class="row">
        <div class="col-md-6 mb-2">
          <label class="form-label">Name</label>
          <input type="text" name="name" class="form-control" [(ngModel)]="certificateToUpdate.name" required />
        </div>
        <div class="col-md-6 mb-2">
          <label class="form-label">Type</label>
          <input type="text" name="type" class="form-control" [(ngModel)]="certificateToUpdate.type" required />
        </div>
        <div class="col-md-6 mb-2">
          <label class="form-label">Issued By</label>
          <input type="text" name="issuedBy" class="form-control" [(ngModel)]="certificateToUpdate.issuedBy" required />
        </div>
        <div class="col-md-6 mb-2">
          <label class="form-label">Issued To</label>
          <input type="text" name="issuedTo" class="form-control" [(ngModel)]="certificateToUpdate.issuedTo" required />
        </div>
        <div class="col-md-6 mb-2">
          <label class="form-label">Issue Date</label>
          <input type="date" name="issueDate" class="form-control" [(ngModel)]="certificateToUpdate.issueDate" required />
        </div>
        <div class="col-md-6 mb-2">
          <label class="form-label">Expiry Date</label>
          <input type="date" name="expiryDate" class="form-control" [(ngModel)]="certificateToUpdate.expiryDate" required />
        </div>
      </div>

      <div class="d-flex justify-content-center gap-3 mt-3">
        <button type="submit" class="btn btn-success btn-sm w-25">Update</button>
        <button type="button" class="btn btn-secondary btn-sm w-25"
          (click)="certificateToUpdate = { id: null, name: '', type: '', issuedBy: '', issuedTo: '', issueDate: '', expiryDate: '' }">
          Cancel
        </button>
      </div>
    </form>
  </div>
</div>
